/*
 * testsMain.c
 *
 *  Created on: 13 févr. 2018
 *      Author: obfe6300
 */

#include <stdio.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "../inc/variables.h"
#include "testTools.h"

// mettre les varaibles suivantes à 0 ou 1 pour selectionner les tests a executer
#define ALL_TESTS		1
#define PARAMETRES		0
#define ADDITIONS		1
#define SOUSTRACTIONS	0
#define MULTIPLICATIONS	0
#define DIVISIONS		0

//-----------------------------------------------------------
//
//			main
//
//-----------------------------------------------------------
int main(int argc, char **argv){
	char programme[250];

	plusGrandNombre=0;

	if (argc > 1){
		int i;
		char parametre[50];
		for (i = 1 ; i < argc ; i++){
			strcpy(parametre, argv[i]);
			printf("analyse du parametre %s\n", parametre);
			if (strcmp(parametre, "-v") == 0) verbose = 1;
			if (strcmp(parametre, "-t") == 0){
				numTestToExecute = atoi(argv[++i]);
				printf("Execution du test n° %d uniquement de chaque serie seectionnéé\n", numTestToExecute);
			}
		}

	}

	strcpy(programme,"bin/calculatriceGrandsNombres");

	system("rm bin/resultat.txt");
	system("touch bin/resultat.txt");
	printf("================\n");
	printf("debut des tests \n");
	printf("----------------\n");

	if (ALL_TESTS || PARAMETRES){
		initTests();
		printf(" tests parametres invalides\n");
		addTest((char*)" ", (char*)"calculatriceGrandsNombres [nombre entier] [+|-|x|:] [nombre]");
		addTest((char*)"1", (char*)"calculatriceGrandsNombres [nombre entier] [+|-|x|:] [nombre]");
		addTest((char*)"1 + 1b", (char*)"calculatriceGrandsNombres [nombre entier] [+|-|x|:] [nombre]");
		addTest((char*)"a + b", (char*)"calculatriceGrandsNombres [nombre entier] [+|-|x|:] [nombre]");
		addTest((char*)"1 + 2 + 3", (char*)"calculatriceGrandsNombres [nombre entier] [+|-|x|:] [nombre]");
		execTests(programme);
		
		printf("----------------\n");
	}

	if (ALL_TESTS || ADDITIONS){
		initTests();
		printf(" tests additions\n");
		addTest((char*)"12 + 34", (char*)"46");
		addTest((char*)"12 + 0", (char*)"12");
		addTest((char*)"17 + 34", (char*)"51");
		addTest((char*)"80 + 34", (char*)"114");
		addTest((char*)"0 + 34", (char*)"34");
		addTest((char*)"80 + 34", (char*)"114");
		addTest((char*)"100 + 25", (char*)"125");
		addTest((char*)"10000 + 25", (char*)"10025");
		addTest((char*)"25 + 10000", (char*)"10025");
		addTest((char*)"1234567890123456789012345678901234567890 + 1234567890123456789012345678901234567890", (char*)"2469135780246913578024691357802469135780");
		addTest((char*)"1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890 + 1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890", (char*)"2469135780246913578024691357802469135780246913578024691357802469135780246913578024691357802469135780246913578024691357802469135780246913578024691357802469135780");
		execTests(programme);

		printf("----------------\n");
	}

	if (ALL_TESTS || SOUSTRACTIONS){
		initTests();
		printf(" tests soustractions\n");
		addTest((char*)"43 - 12",(char*) "31");
		addTest((char*)"43 - 0",(char*) "43");
		addTest((char*)"43 - 43",(char*) "0");
		addTest((char*)"100 - 50", (char*)"50");
		addTest((char*)"10 - 50", (char*)"ERREUR : impossible de soustraire 50 de 10 (pas de soustraction negative permise)");
		execTests(programme);

		printf("----------------\n");
	}

	if (ALL_TESTS || MULTIPLICATIONS){
		initTests();
		printf(" tests multiplications\n");
		addTest((char*)"3 x 4", (char*)"12");
		addTest((char*)"3 x 0", (char*)"0");
		addTest((char*)"0 x 5", (char*)"0");
		addTest((char*)"2 x 12", (char*)"24");
		addTest((char*)"456 x 3", (char*)"1368");
		addTest((char*)"456 x 123", (char*)"56088");
		addTest((char*)"12345678901234567890 x 100000000", (char*)"1234567890123456789000000000");
		addTest((char*)"123456789123456789 x 987654321987654321", (char*)"121932631356500531347203169112635269");
		addTest((char*)"123456789012345678901234567890123456789012345678901234567890 x 123456789012345678901234567890123456789012345678901234567890", (char*)"15241578753238836750495351562566681945008382873376009755225087639153757049236500533455762536198787501905199875019052100");
		addTest((char*)"123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890 x 123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890", (char*)"15241578753238836750495351562566681945008382873376009755225118122311263526910001524158887669562677518670946627038562550221003043773814983252552966212772443410028959019878067369875323883776284103056503581773537875324142539247093129096177200426764508794391129754610580862978204875049535166380124984525529645241304679203005639388188081085607559823239631153791850617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950602042816308489602755677492388050602450053345566130163088725499162083798201529504648685062947721717543057492879134281400396281351287913456253619877737844840985032769419628105474075293400618777625383002591070412741960252522481346377076666750190519886267337309751562263087639079520012193273126047859425087639153757049236500533455762536198787501905199875019052100");
		execTests(programme);

		printf("----------------\n");
	}

	if (ALL_TESTS || DIVISIONS){
	printf(" tests divisions\n");
		initTests();
		addTest((char*)"8 : 40", (char*)"ERREUR : (compare)impossible de diviser 8 par 40 (pas de division reelle)");
		addTest((char*)"25 : 40", (char*)"ERREUR : (compare)impossible de diviser 25 par 40 (pas de division reelle)");
		addTest((char*)"8 : 4", (char*)"2");
		addTest((char*)"8 : 3", (char*)"2");
		addTest((char*)"8 : 1", (char*)"8");
		addTest((char*)"8 : 8", (char*)"1");
		addTest((char*)"100 : 20", (char*)"5");
		addTest((char*)"100 : 5", (char*)"20");
		addTest((char*)"80 : 40", (char*)"2");
		addTest((char*)"100000 : 5", (char*)"20000");
		addTest((char*)"12345678901234567890 : 123", (char*)"100371373180768844");
		addTest((char*)"121932631356500531347203169112635269 : 123456789123456789", (char*)"987654321987654321");
		addTest((char*)"121932631356500531347203169112635269 : 987654321987654321", (char*)"123456789123456789");
		addTest((char*)"121932631356500531347203169112635269 : 1", (char*)"121932631356500531347203169112635269");
		addTest((char*)"15241578753238836750495351562566681945008382873376009755225118122311263526910001524158887669562677518670946627038562550221003043773814983252552966212772443410028959019878067369875323883776284103056503581773537875324142539247093129096177200426764508794391129754610580862978204875049535166380124984525529645241304679203005639388188081085607559823239631153791850617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950602042816308489602755677492388050602450053345566130163088725499162083798201529504648685062947721717543057492879134281400396281351287913456253619877737844840985032769419628105474075293400618777625383002591070412741960252522481346377076666750190519886267337309751562263087639079520012193273126047859425087639153757049236500533455762536198787501905199875019052100 : 123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890", (char*)"123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
		addTest((char*)"15241578753238836750495351562566681945008382873376009755225118122311263526910001524158887669562677518670946627038562550221003043773814983252552966212772443410028959019878067369875323883776284103056503581773537875324142539247093129096177200426764508794391129754610580862978204875049535166380124984525529645241304679203005639388188081085607559823239631153791850617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950617284395061728439506172843950602042816308489602755677492388050602450053345566130163088725499162083798201529504648685062947721717543057492879134281400396281351287913456253619877737844840985032769419628105474075293400618777625383002591070412741960252522481346377076666750190519886267337309751562263087639079520012193273126047859425087639153757049236500533455762536198787501905199875019052100 : 2", (char*)"7620789376619418375247675781283340972504191436688004877612559061155631763455000762079443834781338759335473313519281275110501521886907491626276483106386221705014479509939033684937661941888142051528251790886768937662071269623546564548088600213382254397195564877305290431489102437524767583190062492262764822620652339601502819694094040542803779911619815576895925308642197530864219753086421975308642197530864219753086421975308642197530864219753086421975308642197530864219753086421975308642197530864219753086421975308642197530864219753086421975308642197530864219753086421975308642197530864219753086421975308642197530864219753086421975308642197530864219753086421975308642197530864219753086421975308642197530864219753086421975308642197530864219753086421975308642197530864219753086421975301021408154244801377838746194025301225026672783065081544362749581041899100764752324342531473860858771528746439567140700198140675643956728126809938868922420492516384709814052737037646700309388812691501295535206370980126261240673188538333375095259943133668654875781131543819539760006096636563023929712543819576878524618250266727881268099393750952599937509526050");
		execTests(programme);
		
		printf("----------------\n");
	}
	bilanTests();
	return 0;
}
